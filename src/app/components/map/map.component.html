<p-growl [value]="msgs"></p-growl>

<div>
    <div class="container well" [ngClass]="{'hasCrosshair': gettingCoords}">
        <div class="map-container">
            <sebm-google-map [latitude]="initialLat" [longitude]="initialLng" [streetViewControl]="false" [zoom]="zoomAmount" [disableDoubleClickZoom]="true" (mapClick)="mapClicked($event)" [draggableCursor]="cursorType">
                <sebm-google-map-marker *ngFor="let marker of markers" [latitude]="marker.lat" [longitude]="marker.lng" [title]="marker.title" [label]="marker.label" [iconUrl]="marker.iconUrl" (markerClick)="clickedMarker(marker)">
                </sebm-google-map-marker>
            </sebm-google-map>
        </div>
        <button (click)="addMarker()" class="btn">Add Marker</button>
        <button (click)="editMarker()" [disabled]="!this.currentMarker" class="btn"> Edit Marker </button>
        <button *ngIf="isLocal()" (click)="deleteMarker()" [disabled]="!this.currentMarker" class="btn"> Delete Marker </button>

    </div>

    <div class="timeline-container well">
        <app-timeline *ngIf="this.currentMarker" [marker]="this.currentMarker"></app-timeline>
        <div *ngIf="this.currentMarker">
            <h2>
                Please select a map marker.
            </h2>
        </div>
    </div>

    <p-dialog width="1000" height="800" header="Marker Form" modal="true" [(visible)]="isEditing">
        <div class="edit-form">

            <div *ngIf="isEditing" class="form-group edit-form">
                <input [(ngModel)]="editingMarker.title" type="text" class="form-control" placeholder="New Title" required>
                <input [(ngModel)]="editingMarker.street1" type="text" class="form-control" placeholder="Street1">
                <input [(ngModel)]="editingMarker.street2" type="text" class="form-control" placeholder="Street2">
                <input [(ngModel)]="editingMarker.lat" type="text" class="form-control" placeholder="Latitude" required>
                <input [(ngModel)]="editingMarker.lng" type="text" class="form-control" placeholder="Longitude" required>
                <input [(ngModel)]="editingMarker.label" type="text" class="form-control" placeholder="Label">
                <button class="btn primary-btn" (click)=onSave()>Save</button>
                <button class="btn primary-btn" (click)=cancel()>Cancel</button>
            </div>
        </div>
    </p-dialog>

</div>